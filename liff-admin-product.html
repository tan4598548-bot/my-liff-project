<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>å•†å“ä¸Šæ¶</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

  <style>
    body {
      font-family: system-ui;
      background: #f2f2f2;
      padding: 16px;
    }
    h2 { text-align: center; }

    .card {
      background: #fff;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 16px;
    }

    label {
      font-weight: bold;
      display: block;
      margin-top: 10px;
    }

    input, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    button {
      width: 100%;
      padding: 12px;
      background: #06c755;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      margin-top: 16px;
    }
  </style>
</head>

<body>
  <h2>ğŸ§º å•†å“ä¸Šæ¶</h2>

  <div class="card">
    <label>å•†å“åç¨±</label>
    <input id="name" placeholder="ä¾‹ï¼šç¶­å°¼ç†Šé€£å¸½å¤–å¥—" />

    <label>åƒ¹æ ¼</label>
    <input id="price" type="number" placeholder="ä¾‹ï¼š590" />

    <label>çµå–®æ—¥</label>
    <input id="closeDate" type="date" />

    <label>å°ºå¯¸ï¼ˆç”¨ / åˆ†éš”ï¼‰</label>
    <input id="sizes" placeholder="S/M/L/XL/2L/3L/å‡ç¢¼" />

    <label>é¡è‰²ï¼ˆç”¨ / åˆ†éš”ï¼‰</label>
    <input id="colors" placeholder="ç´…/é»ƒ/è—/å°ç†Š/å¤©ç©º/ç¶­å°¼" />

    <button onclick="submitProduct()">âœ… ä¸Šæ¶å•†å“</button>
  </div>

<script>
async function init() {
  await liff.init({ liffId: "2008857998-AoqmEajq" });
  if (!liff.isLoggedIn()) liff.login();
}

async function submitProduct() {
  const body = {
    name: name.value.trim(),
    price: Number(price.value),
    closeDate: closeDate.value,
    sizes: sizes.value.split("/"),
    colors: colors.value.split("/")
  };

  if (!body.name || !body.price || !body.closeDate) {
    alert("è«‹å¡«å®Œæ•´è³‡æ–™");
    return;
  }

  const res = await fetch("/api/admin/products/create", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(body)
  });

  if (res.ok) {
    alert("å•†å“å·²ä¸Šæ¶");
    location.reload();
  } else {
    alert("ä¸Šæ¶å¤±æ•—");
  }
}

init();
</script>
</body>
</html>
