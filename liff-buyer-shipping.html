<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>æˆ‘çš„å‡ºè²¨ç‹€æ…‹</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<style>
body { font-family: system-ui; padding: 12px; background:#f5f5f5; }
.order {
  background:#fff;
  padding:12px;
  border-radius:8px;
  margin-bottom:10px;
}
.shipped { color: green; }
</style>
</head>
<body>

<h2>ğŸ“¦ æˆ‘çš„å‡ºè²¨ç‹€æ…‹</h2>
<div id="orders">è¼‰å…¥ä¸­â€¦</div>

<script>
async function init() {
  await liff.init({ liffId: '2008857998-fa5yPkPR' });
  const profile = await liff.getProfile();

  const res = await fetch(`/api/buyer/shipping?lineUserId=${profile.userId}`);
  const orders = await res.json();

  const box = document.getElementById('orders');
  box.innerHTML = '';

  orders.forEach(o => {
    box.innerHTML += `
      <div class="order">
        <div><strong>${o.productName}</strong></div>
        <div>${o.color} / ${o.size} x ${o.qty}</div>
        <div class="shipped">
          ${o.ship_status === 'shipped' ? 'âœ… å·²å‡ºè²¨' : 'â³ è™•ç†ä¸­'}
        </div>
      </div>
    `;
  });
}
init();
</script>
</body>
</html>
