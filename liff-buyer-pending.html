<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>æˆ‘çš„ç­‰å¾…ä¸­è¨‚å–®</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body { font-family: sans-serif; padding: 16px; }
    h2 { margin-bottom: 12px; }
    .item {
      border-bottom: 1px solid #ddd;
      padding: 8px 0;
    }
    .empty { color: #888; }
  </style>
</head>
<body>
  <h2>ğŸ“¦ æˆ‘é‚„åœ¨ç­‰çš„å•†å“</h2>
  <div id="list">è®€å–ä¸­...</div>

<script>
async function main() {
  await liff.init({ liffId: "2008857998-qOI2DqCC" });

  if (!liff.isLoggedIn()) {
    liff.login();
    return;
  }

  const profile = await liff.getProfile();
  const userId = profile.userId;

  const res = await fetch(`/api/buyer/pending?userId=${userId}`);
  const data = await res.json();

  const el = document.getElementById("list");
  if (!data.length) {
    el.innerHTML = `<div class="empty">ğŸ‰ ç›®å‰æ²’æœ‰ç­‰å¾…ä¸­çš„è¨‚å–®</div>`;
    return;
  }

  el.innerHTML = data.map(o => `
    <div class="item">
      <b>${o.productName}</b><br/>
      ${o.color || ""} ${o.size || ""} Ã— ${o.quantity}
    </div>
  `).join("");
}

main();
</script>
</body>
</html>
